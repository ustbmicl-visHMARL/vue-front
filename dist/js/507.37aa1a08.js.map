{"version":3,"file":"js/507.37aa1a08.js","mappings":"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","sources":["webpack://vue-library/./src/views/Index/Front/MyInfo/index.vue","webpack://vue-library/src/views/Index/Front/MyInfo/index.vue","webpack://vue-library/./src/views/Index/Front/MyInfo/index.vue?ae63","webpack://vue-library/./src/views/Index/Front/MyInfo/index.vue?f759"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"myinfo maxWH\"},[_vm._m(0),_c('main',{staticClass:\"main\"},[_c('el-row',{staticClass:\"tab\"},[_c('el-col',{attrs:{\"span\":6}},[_c('el-menu',{staticClass:\"el-menu-vertical-demo\",attrs:{\"default-active\":\"0\"}},[_c('el-menu-item',{attrs:{\"index\":\"0\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.showInfo.apply(null, arguments)}}},[_vm._v(\"基础信息\")]),_c('el-menu-item',{attrs:{\"index\":\"1\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.showPwd.apply(null, arguments)}}},[_vm._v(\"修改密码\")])],1)],1),_c('el-col',{staticClass:\"content\",attrs:{\"span\":12}},[_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.info_path),expression:\"info_path\"}],ref:\"frontMyInfoForm\",attrs:{\"model\":_vm.frontMyInfoForm,\"label-width\":\"80px\",\"rules\":_vm.rules,\"hide-required-asterisk\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userinfo.account),callback:function ($$v) {_vm.$set(_vm.userinfo, \"account\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userinfo.account\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userinfo.username),callback:function ($$v) {_vm.$set(_vm.userinfo, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userinfo.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.frontMyInfoForm.email),callback:function ($$v) {_vm.$set(_vm.frontMyInfoForm, \"email\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"frontMyInfoForm.email\"}})],1),_c('el-form-item',{attrs:{\"align\":\"center\"}},[_c('el-button',{staticStyle:{\"margin-left\":\"-40px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.setEmail('frontMyInfoForm')}}},[_vm._v(\"提 交\")]),_c('el-button',{nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.resetForm('frontMyInfoForm')}}},[_vm._v(\"重 置\")])],1)],1),_c('el-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pwd_path),expression:\"pwd_path\"}],ref:\"frontPwdForm\",attrs:{\"model\":_vm.pwdForm,\"rules\":_vm.pwdRules,\"align\":\"center\",\"label-width\":\"80px\",\"label-position\":\"right\",\"hide-required-asterisk\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"oldpwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.oldpwd),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"oldpwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.oldpwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newpwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.newpwd),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"newpwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.newpwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"newpwd1\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.newpwd1),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"newpwd1\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.newpwd1\"}})],1),_c('el-form-item',{attrs:{\"align\":\"center\"}},[_c('el-button',{staticStyle:{\"margin-left\":\"-40px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.updatePwd('frontPwdForm')}}},[_vm._v(\"修 改\")]),_c('el-button',{nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.resetForm('frontPwdForm')}}},[_vm._v(\"重 置\")])],1)],1)],1)],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header flex\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"个人信息\")]),_c('p',{staticClass:\"info flex\"},[_vm._v(\"查看/修改账户的基本信息\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"myinfo maxWH\">\r\n        <!-- 头部 -->\r\n        <div class=\"header flex\">\r\n            <span class=\"title\">个人信息</span>\r\n            <p class=\"info flex\">查看/修改账户的基本信息</p>\r\n        </div>\r\n        <!-- 主体 -->\r\n        <main class=\"main\">\r\n            <!-- 导航 -->\r\n            <el-row class=\"tab\">\r\n                <el-col :span=\"6\">\r\n                    <el-menu default-active=\"0\" class=\"el-menu-vertical-demo\">\r\n                        <el-menu-item index=\"0\" @click.native.prevent.stop=\"showInfo\">基础信息</el-menu-item>\r\n                        <el-menu-item index=\"1\" @click.native.prevent.stop=\"showPwd\">修改密码</el-menu-item>\r\n                    </el-menu>\r\n                </el-col>\r\n                <el-col :span=\"12\" class=\"content\">\r\n                    <!-- 基本信息 -->\r\n                    <el-form ref=\"frontMyInfoForm\" :model=\"frontMyInfoForm\" label-width=\"80px\" :rules=\"rules\"\r\n                        hide-required-asterisk v-show=\"info_path\">\r\n                        <el-form-item label=\"账号\">\r\n                            <el-input disabled v-model.trim=\"userinfo.account\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"用户名\">\r\n                            <el-input disabled v-model.trim=\"userinfo.username\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"邮箱\" prop=\"email\">\r\n                            <el-input v-model.trim=\"frontMyInfoForm.email\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item align=\"center\">\r\n                            <el-button type=\"primary\" style=\"margin-left: -40px;\"\r\n                                @click.native.prevent.stop=\"setEmail('frontMyInfoForm')\">提 交</el-button>\r\n                            <el-button @click.native.prevent.stop=\"resetForm('frontMyInfoForm')\">重 置</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                    <!-- 修改密码 -->\r\n                    <el-form ref=\"frontPwdForm\" :model=\"pwdForm\" :rules=\"pwdRules\" align=\"center\" label-width=\"80px\"\r\n                        label-position=\"right\" hide-required-asterisk v-show=\"pwd_path\">\r\n                        <el-form-item label=\"旧密码\" prop=\"oldpwd\">\r\n                            <el-input type=\"password\" v-model.trim=\"pwdForm.oldpwd\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"新密码\" prop=\"newpwd\">\r\n                            <el-input type=\"password\" v-model.trim=\"pwdForm.newpwd\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"确认密码\" prop=\"newpwd1\">\r\n                            <el-input type=\"password\" v-model.trim=\"pwdForm.newpwd1\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item align=\"center\">\r\n                            <el-button type=\"primary\" @click.native.prevent.stop=\"updatePwd('frontPwdForm')\"\r\n                                style=\"margin-left: -40px;\">修 改</el-button>\r\n                            <el-button @click.native.prevent.stop=\"resetForm('frontPwdForm')\">重 置</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </el-col>\r\n            </el-row>\r\n        </main>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    name: 'MyInfo',\r\n    data() {\r\n        const validateOldpwd = (rule, value, callback) => {\r\n            const reg = /^[a-zA-Z0-9_]{8,12}$/\r\n            if (value.trim().length <= 0) {\r\n                callback(new Error('请输入旧密码'))\r\n            } else if (!reg.test(value.trim())) {\r\n                callback(new Error('密码格式错误'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        const validateNewpwd = (rule, value, callback) => {\r\n            const reg = /^[a-zA-Z0-9_]{8,12}$/\r\n            if (value.trim().length <= 0) {\r\n                callback(new Error('请输入新密码'))\r\n            } else if (!reg.test(value.trim())) {\r\n                callback(new Error('密码格式错误'))\r\n            } else if (value.trim() === this.pwdForm.oldpwd) {\r\n                callback(new Error('新密码不能与旧密码相同'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        const validateNewpwd1 = (rule, value, callback) => {\r\n            if (this.pwdForm.newpwd.trim() === '') {\r\n                callback(new Error('请先输入新密码'))\r\n            } else if (value.trim().length <= 0) {\r\n                callback(new Error('确认密码不得为空'))\r\n            } else if (value.trim() !== this.pwdForm.newpwd) {\r\n                callback(new Error('两次输入密码不一致'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        return {\r\n            // 邮箱表单\r\n            frontMyInfoForm: {\r\n                email: ''\r\n            },\r\n            // 修改密码\r\n            pwdForm: {\r\n                oldpwd: '',\r\n                newpwd: '',\r\n                newpwd1: '',\r\n            },\r\n            // 表单验证规则\r\n            pwdRules: {\r\n                oldpwd: [{ required: true, trigger: ['blur', 'change'], validator: validateOldpwd }],\r\n                newpwd: [{ required: true, trigger: ['blur', 'change'], validator: validateNewpwd }],\r\n                newpwd1: [{ required: true, trigger: ['blur', 'change'], validator: validateNewpwd1 }],\r\n            },\r\n            rules: {\r\n                email: [{ type: 'email', required: true, trigger: 'blur', message: '邮箱格式不正确' }]\r\n            },\r\n            // 显示哪个\r\n            info_path: true,\r\n            pwd_path: false,\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['userinfo'])\r\n    },\r\n    mounted() {\r\n        this.getUserEmail()\r\n    },\r\n    methods: {\r\n        // 获取用户信息\r\n        async getUserInfo(user_id) {\r\n            try {\r\n                await this.$store.dispatch('getUserInfo', { user_id })\r\n            } catch (e) {\r\n                console.warn(e.message)\r\n            }\r\n        },\r\n        // 初始化邮箱\r\n        getUserEmail() {\r\n            if (this.userinfo.email === '未绑定邮箱') {\r\n                this.frontMyInfoForm.email = ''\r\n            } else {\r\n                this.frontMyInfoForm.email = this.userinfo.email\r\n            }\r\n        },\r\n        // 重置表单\r\n        resetForm(formname) {\r\n            this.$refs[formname].resetFields()\r\n        },\r\n        // 显示基本信息\r\n        showInfo() {\r\n            this.info_path = true\r\n            this.pwd_path = false\r\n            this.resetForm('frontMyInfoForm')\r\n            this.resetForm('frontPwdForm')\r\n            this.getUserEmail()\r\n        },\r\n        // 显示修改密码\r\n        showPwd() {\r\n            this.info_path = false\r\n            this.pwd_path = true\r\n            this.resetForm('frontMyInfoForm')\r\n            this.resetForm('frontPwdForm')\r\n            this.getUserEmail()\r\n        },\r\n        // 修改密码\r\n        async updatePwd(formname) {\r\n            await this.$refs[formname].validate(async vaild => {\r\n                if (vaild) {\r\n                    await this.$confirm('确定修改?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(async () => {\r\n                        try {\r\n                            const pwdForm = { user_id: this.userinfo.user_id, oldpwd: this.pwdForm.oldpwd, newpwd: this.pwdForm.newpwd }\r\n                            await this.$store.dispatch('updatePwd', JSON.stringify(pwdForm))\r\n                                .then(res => {\r\n                                    this.$message({ type: 'success', message: res })\r\n                                    this.resetForm(formname)\r\n                                    setTimeout(() => {\r\n                                        // 退出登录\r\n                                        this.$store.dispatch('userLogout')\r\n                                            .then(res => this.$router.push('/login'))\r\n                                    }, 1000)\r\n                                }).catch(err => this.$message({ type: 'warning', message: err.message }))\r\n                        } catch (e) {\r\n                            this.$message({ type: 'warning', message: e.message })\r\n                        }\r\n                    }).catch(() => { this.$message({ type: 'info', message: '已取消' }) })\r\n                }\r\n            })\r\n        },\r\n        // 设置邮箱\r\n        async setEmail(formname) {\r\n            await this.$refs[formname].validate(async vaild => {\r\n                if (vaild) {\r\n                    await this.$confirm('确定提交?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(async () => {\r\n                        try {\r\n                            const form = { user_id: this.userinfo.user_id, email: this.frontMyInfoForm.email }\r\n                            await this.$store.dispatch('setEmail', JSON.stringify(form))\r\n                                .then(res => {\r\n                                    this.$message({ type: 'success', message: res })\r\n                                    // window.location.reload()\r\n                                    this.getUserInfo(this.userinfo.user_id)\r\n                                }).catch(err => this.$message({ type: 'warning', message: err.message }))\r\n                        } catch (e) {\r\n                            this.$message({ type: 'warning', message: e.message })\r\n                        }\r\n                    }).catch(() => { this.$message({ type: 'info', message: '已取消' }) })\r\n                }\r\n            })\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.myinfo {\r\n    .header {\r\n        width: 100%;\r\n        height: 100px;\r\n        background-color: #324057;\r\n        box-sizing: border-box;\r\n        padding: 50px 20% 10px;\r\n        overflow: hidden;\r\n\r\n        .title {\r\n            font-size: 25px;\r\n            color: #fff;\r\n        }\r\n\r\n        .info {\r\n            margin-left: 50px;\r\n            flex-flow: column;\r\n            justify-content: center;\r\n            color: #fff;\r\n        }\r\n    }\r\n\r\n    .main {\r\n        width: 100%;\r\n        height: calc(100% - 100px);\r\n        box-sizing: border-box;\r\n        padding: 20px 20%;\r\n\r\n        .tab {\r\n            .content {\r\n                box-sizing: border-box;\r\n                padding-top: 30px;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.el-menu {\r\n    border-right: 0 !important;\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=44c08254&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=44c08254&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44c08254\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","nativeOn","$event","preventDefault","stopPropagation","showInfo","apply","arguments","_v","showPwd","directives","name","rawName","value","info_path","expression","ref","frontMyInfoForm","rules","model","userinfo","account","callback","$$v","$set","trim","username","email","staticStyle","setEmail","resetForm","pwd_path","pwdForm","pwdRules","oldpwd","newpwd","newpwd1","updatePwd","staticRenderFns","data","validateOldpwd","rule","reg","length","Error","test","validateNewpwd","validateNewpwd1","required","trigger","validator","type","message","computed","mapGetters","mounted","getUserEmail","methods","user_id","$store","dispatch","e","console","warn","formname","$refs","resetFields","validate","vaild","$confirm","confirmButtonText","cancelButtonText","then","JSON","stringify","res","$message","setTimeout","$router","push","catch","err","form","getUserInfo","component"],"sourceRoot":""}
"use strict";(self["webpackChunkvue_library"]=self["webpackChunkvue_library"]||[]).push([[257],{7257:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-list maxWH clearfix"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.testdetail,border:"","max-height":"250"}},[t("el-table-column",{attrs:{prop:"test_name",label:"实验名","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"test_id",label:"实验id","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"user_name",label:"实验者"}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",prop:"test_id","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"handler flex-center"},[t("el-button",{attrs:{type:"warning"},nativeOn:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.goPath("reserveinfo",s.row.test_id)}}},[e._v(" 查看实验 ")]),t("el-button",{attrs:{type:"warning"},nativeOn:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openDetailTest(s.$index,e.testdetail)}}},[e._v(" 实验参数 ")])],1)]}}])})],1),t("el-pagination",{staticStyle:{padding:"10px 0"},attrs:{"current-page":e.page_no,"page-sizes":e.page_sizes,"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.test_count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"实验参数",visible:e.testDetailDialog},on:{"update:visible":function(t){e.testDetailDialog=t}}},[t("el-form",{ref:"testDetailForm",attrs:{model:e.testDetailForm,"label-width":"80px",rules:e.rules,"hide-required-asterisk":""}},[t("el-form-item",{attrs:{label:"seed",prop:"seed"}},[t("el-input",{attrs:{disabled:""},model:{value:e.testDetailForm.seed,callback:function(t){e.$set(e.testDetailForm,"seed","string"===typeof t?t.trim():t)},expression:"testDetailForm.seed"}})],1),t("el-form-item",{attrs:{label:"env_id",prop:"env_id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.testDetailForm.env_id,callback:function(t){e.$set(e.testDetailForm,"env_id","string"===typeof t?t.trim():t)},expression:"testDetailForm.env_id"}})],1),t("el-form-item",{attrs:{label:"learning_rate",prop:"learning_rate"}},[t("el-input",{attrs:{disabled:""},model:{value:e.testDetailForm.learning_rate,callback:function(t){e.$set(e.testDetailForm,"learning_rate","string"===typeof t?t.trim():t)},expression:"testDetailForm.learning_rate"}})],1),t("el-form-item",{attrs:{label:"input_size",prop:"input_size"}},[t("el-input",{attrs:{disabled:""},model:{value:e.testDetailForm.input_size,callback:function(t){e.$set(e.testDetailForm,"input_size","string"===typeof t?t.trim():t)},expression:"testDetailForm.input_size"}})],1),t("el-form-item",{attrs:{label:"info",prop:"info"}},[t("el-input",{attrs:{disabled:""},model:{value:e.testDetailForm.info,callback:function(t){e.$set(e.testDetailForm,"info","string"===typeof t?t.trim():t)},expression:"testDetailForm.info"}})],1)],1)],1)],1)},r=[],i=(s(7658),s(86)),n=s(3822),o={name:"TestList",data(){const e=(e,t,s)=>{const a=/^[\u4e00-\u9fa5]{1,7}$|^[\dA-Za-z_]{1,14}$/;t.trim().length<=0?s(new Error("请输入账号")):a.test(t.trim())?s():s(new Error("实验名不能超过7个汉字或者14个字符"))},t=(e,t,s)=>{t.trim().length<=0?s(new Error("请输入用户名")):s()},s=(e,t,s)=>{const a=/^[a-zA-Z0-9_]{8,12}$/;t.trim().length<=0?s(new Error("请输入密码")):a.test(t.trim())?s():s(new Error("密码由8到12位的字母、数字或下划线组成"))},a=(e,t,s)=>{""===this.userAddForm.password.trim()?s(new Error("请先输入密码")):t.trim().length<=0?s(new Error("确认密码不得为空")):t.trim()!==this.userAddForm.password?s(new Error("两次输入密码不一致")):s()},r=(e,t,s)=>{""===this.userUpdateForm.password.trim()?s(new Error("请先输入密码")):t.trim().length<=0?s(new Error("确认密码不得为空")):t.trim()!==this.userUpdateForm.password?s(new Error("两次输入密码不一致")):s()};return{rules:{account:[{required:!0,trigger:["blur","change"],validator:e}],username:[{required:!0,trigger:["blur","change"],validator:t}],password:[{required:!0,trigger:["blur","change"],validator:s}],adduserpwd1:[{required:!0,trigger:["blur","change"],validator:a}],updateuserpwd1:[{required:!0,trigger:["blur","change"],validator:r}],test_status:[{required:!0,message:"请选择用户状态",trigger:"change"}]},user_status:[{label:"全部",value:"0"},{label:i.st,value:"1"},{label:i.pv,value:"2"}],test_status:[{label:"全部",value:"0"},{label:i.sX,value:"1"},{label:i._h,value:"2"}],searchForm:{account:"",username:"",user_status:"",create_name:""},page_no:1,page_size:8,page_sizes:[8,16,30,50,100],testAddDialog:!1,userUpdateDialog:!1,testUpdateDialog:!1,testAddForm:{account:"",username:"",create_name:"",test_status:""},testDetailDialog:!1,testDetailForm:{seed:"",env_id:"",learning_rate:"",input_size:"",info:""},userUpdateForm:{user_id:0,account:"",username:"",update_pwd:!1,password:"",updateuserpwd1:"",user_status:i.st},testUpdateForm:{test_id:0,test_name:"",user_name:"",test_status:""}}},computed:{...(0,n.Se)(["user_id","userlist","testlist","user_count","test_count","userinfo","testdetail"])},mounted(){this.searchForm.user_status=this.user_status[0].value,this.searchForm.create_name=this.userinfo.username,this.testAddForm.create_name=this.userinfo.username,this.getUserList(),this.getTestList(),this.getDetailList()},methods:{resetForm(e){this.$refs[e].resetFields()},resetForm1(e){this.testUpdateForm.test_name="",this.testUpdateForm.user_name="",this.testUpdateForm.test_status=""},async addUser(e){await this.$refs[e].validate((async t=>{if(t)try{await this.$store.dispatch("addUser",JSON.stringify(this.userAddForm)).then((t=>{this.resetForm(e),this.testAddDialog=!1,this.$message({type:"success",message:t}),this.getUserList()})).catch((e=>this.$message({type:"warning",message:e.message})))}catch(s){this.$message({type:"warning",message:s.message})}}))},async addTest(e){await this.$refs[e].validate((async t=>{if(t)try{await this.$store.dispatch("addTest",JSON.stringify(this.testAddForm)).then((t=>{this.resetForm(e),this.testAddDialog=!1,this.$message({type:"success",message:t}),this.getTestList()})).catch((e=>this.$message({type:"warning",message:e.message})))}catch(s){this.$message({type:"warning",message:s.message})}}))},openUpdateUser(e,t){this.userUpdateDialog=!0;const s=t[e];this.userUpdateForm={user_id:s.user_id,account:s.account,username:s.username,update_pwd:!1,password:"",updateuserpwd1:"",user_status:s.user_status}},openUpdateTest(e,t){this.testUpdateDialog=!0;const s=t[e];this.testUpdateForm={test_id:s.test_id,test_name:s.test_name,user_name:s.user_name,test_status:s.test_status}},openDetailTest(e,t){this.testDetailDialog=!0;const s=t[e];this.testDetailForm={test_id:s.test_id,test_name:s.test_name,user_name:s.user_name,test_status:s.test_status,seed:s.seed,env_id:s.env_id,learning_rate:s.learning_rate,input_size:s.input_size,info:s.info}},async updateUser(e){await this.$refs[e].validate((async t=>{if(t)try{const t={user_id:this.userUpdateForm.user_id,password:this.userUpdateForm.password,user_status:this.userUpdateForm.user_status};await this.$store.dispatch("backUpdateUserInfo",JSON.stringify(t)).then((t=>{this.resetForm(e),this.userUpdateDialog=!1,this.$message({type:"success",message:t}),this.getUserList()})).catch((e=>this.$message({type:"warning",message:e.message})))}catch(s){this.$message({type:"warning",message:s.message})}}))},async updateTest(e){try{const t={test_id:this.testUpdateForm.test_id,test_name:this.testUpdateForm.test_name,user_name:this.testUpdateForm.user_name,test_status:this.testUpdateForm.test_status};await this.$store.dispatch("updateTestInfo",JSON.stringify(t)).then((t=>{this.resetForm(e),this.testUpdateDialog=!1,this.$message({type:"success",message:t}),this.getTestList()})).catch((e=>this.$message({type:"warning",message:e.message})))}catch(t){this.$message({type:"warning",message:t.message})}},handleSizeChange(e){this.page_size=e,this.page_no=1,this.getUserList()},handleCurrentChange(e){this.page_no=e,this.getUserList()},async getUserList(){try{const{page_no:e,page_size:t}=this;let s=this.searchForm.account;const a=/^[0-9]{1,12}$/;a.test(s)||""!==s&&(s="1111111111111111111111111111111111111");let r=this.searchForm.username;const n=/^[\u4e00-\u9fa50-9a-zA-Z]{1,6}$/;n.test(r)||""!==r&&(r="1111111111111111111111111111111111111");let o=Number.parseInt(this.searchForm.user_status)||0;0===o?o="全部":1===o?o=i.st:2===o&&(o=i.pv),await this.$store.dispatch("getUserList",JSON.stringify({page_no:e,page_size:t,account:s,username:r,user_status:o}))}catch(e){this.$message({type:"warning",message:e.message})}},async getTestList(){try{console.log(this.$route.query.parent_id);this.$route.query.parent_id;const{page_no:e,page_size:t}=this;let s=this.searchForm.account;const a=/^[0-9]{1,12}$/;a.test(s)||""!==s&&(s="1111111111111111111111111111111111111");let r=this.searchForm.username,i=this.searchForm.create_name;const n=/^[\u4e00-\u9fa50-9a-zA-Z]{1,6}$/;n.test(r)||""!==r&&(r="1111111111111111111111111111111111111");let o="正常";await this.$store.dispatch("getTestList",JSON.stringify({page_no:e,page_size:t,account:s,username:r,test_status:o,create_name:i}))}catch(e){this.$message({type:"warning",message:e.message})}},async getDetailList(){try{let e=this.$route.query.parent_id;const{page_no:t,page_size:s}=this;let a=this.searchForm.account;const r=/^[0-9]{1,12}$/;r.test(a)||""!==a&&(a="1111111111111111111111111111111111111");let i=this.searchForm.username,n=this.searchForm.create_name;const o=/^[\u4e00-\u9fa50-9a-zA-Z]{1,6}$/;o.test(i)||""!==i&&(i="1111111111111111111111111111111111111");let u="正常";await this.$store.dispatch("getDetailList",JSON.stringify({page_no:t,page_size:s,account:a,username:i,test_status:u,create_name:n,parent_id:e}))}catch(e){this.$message({type:"warning",message:e.message})}},resetSearchForm(e){this.resetForm(e),this.searchForm.user_status=this.user_status[0].value},search(){this.page_no=1,this.page_size=this.page_sizes[0],this.getTestList()},goPath(e,t){this.$router.push({path:e,query:{test_detail_id:t}})},getFrontPath(e){let t=this.$route.path;return t.includes("front")?e:"front/"+e}}},u=o,l=s(1001),m=(0,l.Z)(u,a,r,!1,null,"842a5d14",null),d=m.exports},86:function(e,t,s){s.d(t,{Bv:function(){return l},KM:function(){return u},Kb:function(){return o},QR:function(){return m},_h:function(){return n},pv:function(){return r},sX:function(){return i},st:function(){return a}});const a="正常",r="封禁",i="正常",n="封禁",o="管理员",u="用户",l="使用中",m="空闲中"}}]);
//# sourceMappingURL=257.6892e9f9.js.map
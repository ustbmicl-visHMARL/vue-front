{"version":3,"file":"js/749.1c030ce9.js","mappings":"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","sources":["webpack://vue-library/./src/views/Index/Front/ReserveSeat/index.vue","webpack://vue-library/./src/utils/getCurTime.js","webpack://vue-library/src/views/Index/Front/ReserveSeat/index.vue","webpack://vue-library/./src/views/Index/Front/ReserveSeat/index.vue?63f9","webpack://vue-library/./src/views/Index/Front/ReserveSeat/index.vue?5f41"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"reserve-seat maxWH clearfix\"},[_vm._m(0),_c('main',{staticClass:\"main\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:((Object.keys(_vm.front_reserve_info).length > 0)),expression:\"(Object.keys(front_reserve_info).length > 0)\"}],staticClass:\"exist-reserve\"},[_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.goReserveInfo.apply(null, arguments)}}},[_vm._v(\"查看信息\")])],1),_c('el-button',{staticStyle:{\"margin\":\"15px 0\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();_vm.userAddDialog = true}}},[_vm._v(\"添加用户\")]),_c('div',{staticClass:\"table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.front_seat_list,\"height\":\"350\"}},[_c('el-table-column',{attrs:{\"prop\":\"seat_floor\",\"label\":\"座位楼层\"}}),_c('el-table-column',{attrs:{\"prop\":\"seat_no\",\"label\":\"座位编号\"}}),_c('el-table-column',{attrs:{\"prop\":\"seat_status\",\"label\":\"座位状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.seat_status === '空闲中' ? 'info' : 'warning'}},[_vm._v(_vm._s(scope.row.seat_status))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"handler flex-center\"},[_c('el-button',{attrs:{\"type\":\"info\",\"disabled\":scope.row.seat_status === '空闲中' && (Object.keys(_vm.front_reserve_info).length < 1) ? false : true},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.openReserveSeat(scope.$index, _vm.front_seat_list)}}},[_vm._v(\" 预约 \")])],1)]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"预约座位\",\"visible\":_vm.reserveSeatdDialog},on:{\"update:visible\":function($event){_vm.reserveSeatdDialog=$event}}},[_c('el-form',{ref:\"frontReserveSeatForm\",attrs:{\"model\":_vm.reserveSeatForm,\"label-width\":\"110px\",\"rules\":_vm.rules,\"hide-required-asterisk\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"座位楼层\",\"prop\":\"seat_floor\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.reserveSeatForm.seat_floor),callback:function ($$v) {_vm.$set(_vm.reserveSeatForm, \"seat_floor\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reserveSeatForm.seat_floor\"}})],1),_c('el-form-item',{attrs:{\"label\":\"座位编号\",\"prop\":\"seat_no\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.reserveSeatForm.seat_no),callback:function ($$v) {_vm.$set(_vm.reserveSeatForm, \"seat_no\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reserveSeatForm.seat_no\"}})],1),_c('el-form-item',{attrs:{\"label\":\"预约结束时间\",\"prop\":\"end_time\"}},[_c('el-time-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"选择时间\"},model:{value:(_vm.reserveSeatForm.end_time),callback:function ($$v) {_vm.$set(_vm.reserveSeatForm, \"end_time\", $$v)},expression:\"reserveSeatForm.end_time\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\",\"align\":\"center\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.reserveSeat('frontReserveSeatForm')}}},[_vm._v(\"确 定\")]),_c('el-button',{nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.resetForm('frontReserveSeatForm')}}},[_vm._v(\"重 置\")])],1)],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header flex\"},[_c('span',{staticClass:\"title\"})])\n}]\n\nexport { render, staticRenderFns }","// 获取当前时间\r\n\r\nfunction getCurTime(date = '') {\r\n    const time = new Date(date)\r\n    let year = time.getFullYear()\r\n    let month = (time.getMonth() + 1) < 10 ? `0${time.getMonth() + 1}` : `${time.getMonth() + 1}`\r\n    let day = (time.getDate()) < 10 ? `0${time.getDate()}` : `${time.getDate()}`\r\n    let hours = (time.getHours()) < 10 ? `0${time.getHours()}` : `${time.getHours()}`\r\n    let minutes = (time.getMinutes()) < 10 ? `0${time.getMinutes()}` : `${time.getMinutes()}`\r\n    let seconds = (time.getSeconds()) < 10 ? `0${time.getSeconds()}` : `${time.getSeconds()}`\r\n    let current_day = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\r\n    return current_day\r\n}\r\n\r\nexport default getCurTime","<template>\r\n    <div class=\"reserve-seat maxWH clearfix\">\r\n        <!-- 头部 -->\r\n        <div class=\"header flex\">\r\n            <span class=\"title\"></span>\r\n        </div>\r\n        <!-- 主体 -->\r\n        <main class=\"main\">\r\n            <!-- 已经有预约信息了 -->\r\n            <div class=\"exist-reserve\" v-show=\"(Object.keys(front_reserve_info).length > 0)\">\r\n                <el-button type=\"text\" @click.native.prevent.stop=\"goReserveInfo\">查看信息</el-button>\r\n            </div>\r\n            <!-- 添加 -->\r\n        <el-button type=\"primary\" @click.native.prevent.stop=\"userAddDialog = true\"\r\n            style=\"margin: 15px 0;\">添加用户</el-button>\r\n            <!-- 搜索 -->\r\n            \r\n            <div class=\"table\">\r\n                <el-table :data=\"front_seat_list\" height=\"350\" style=\"width: 100%\">\r\n                    <el-table-column prop=\"seat_floor\" label=\"座位楼层\">\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"seat_no\" label=\"座位编号\">\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"seat_status\" label=\"座位状态\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-tag :type=\"scope.row.seat_status === '空闲中' ? 'info' : 'warning'\">{{\r\n                                    scope.row.seat_status\r\n                            }}</el-tag>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column label=\"操作\" header-align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <div class=\"handler flex-center\">\r\n                                <el-button type=\"info\"\r\n                                    :disabled=\"scope.row.seat_status === '空闲中' && (Object.keys(front_reserve_info).length < 1) ? false : true\"\r\n                                    @click.native.prevent.stop=\"openReserveSeat(scope.$index, front_seat_list)\">\r\n                                    预约\r\n                                </el-button>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n            <!-- 预约的遮罩页 -->\r\n            <el-dialog title=\"预约座位\" :visible.sync=\"reserveSeatdDialog\">\r\n                <el-form ref=\"frontReserveSeatForm\" :model=\"reserveSeatForm\" label-width=\"110px\" :rules=\"rules\"\r\n                    hide-required-asterisk>\r\n                    <el-form-item label=\"座位楼层\" prop=\"seat_floor\">\r\n                        <el-input disabled v-model.trim=\"reserveSeatForm.seat_floor\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"座位编号\" prop=\"seat_no\">\r\n                        <el-input disabled v-model.trim=\"reserveSeatForm.seat_no\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"预约结束时间\" prop=\"end_time\">\r\n                        <el-time-picker placeholder=\"选择时间\" v-model=\"reserveSeatForm.end_time\"\r\n                            style=\"width: 100%;\"></el-time-picker>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\" align=\"center\">\r\n                    <el-button type=\"primary\" @click.native.prevent.stop=\"reserveSeat('frontReserveSeatForm')\">确\r\n                        定</el-button>\r\n                    <el-button @click.native.prevent.stop=\"resetForm('frontReserveSeatForm')\">重 置</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </main>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport getCurTime from '@/utils/getCurTime'\r\nexport default {\r\n    name: 'ReserveSeat',\r\n    data() {\r\n        const validateEndTime = (rule, value, callback) => {\r\n            const reg = /^(\\d{4})-(\\d{2})-(\\d{2})[\\s](\\d{2}):(\\d{2}):(\\d{2})$/\r\n            value = this.getDateStr(value) // 将时间转化为字符串\r\n            value = getCurTime(value) // 格式化\r\n            // 获取当前时间加上15分钟的 时间戳\r\n            let now = new Date().getTime() + 15 * 60 * 1000\r\n            // 获取选择时间的小时\r\n            let hour = new Date(value)\r\n            hour = (hour.getHours()) < 10 ? `0${hour.getHours()}` : `${hour.getHours()}`\r\n            hour = Number.parseInt(hour)\r\n            if (value.trim().length <= 0) { // 不能为空\r\n                callback(new Error('请选择结束时间'))\r\n            } else if (!reg.test(value)) { // 控制格式: yyyy-mm-dd hh:mm:ss\r\n                callback(new Error('时间格式不对'))\r\n            } else if (isNaN(hour)) {\r\n                callback(new Error('时间格式不对'))\r\n            } else if (hour < 9) { // 不能小于9点\r\n                callback(new Error('不能小于早上9点'))\r\n            } else if (hour >= 22) { // 不能大于22点\r\n                callback(new Error('不能大于晚上22点'))\r\n            } else if (new Date(value).getTime() < now) { // 不能少于15分钟\r\n                callback(new Error('预约时间应不少于15分钟'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        return {\r\n            // 楼层的选择列表\r\n            seat_floor: [\r\n                { label: '全部', value: '0' },\r\n                { label: '1楼', value: '1' },\r\n                { label: '2楼', value: '2' },\r\n                { label: '3楼', value: '3' },\r\n                { label: '4楼', value: '4' },\r\n                { label: '5楼', value: '5' },\r\n            ],\r\n            // 搜索座位列表的表单\r\n            searchForm: {\r\n                seat_floor: '',\r\n            },\r\n            // 预约座位的遮罩页\r\n            reserveSeatdDialog: false,\r\n            // 验证规则\r\n            rules: {\r\n                end_time: [{ required: true, trigger: ['blur', 'change'], validator: validateEndTime }],\r\n            },\r\n            \r\n            // 预约座位的表单\r\n            reserveSeatForm: {\r\n                seat_id: 0,\r\n                seat_floor: '', // 座位楼层\r\n                seat_no: '', // 座位编号\r\n                end_time: '', // 预约结束时间\r\n            },\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['front_seat_list', 'userinfo', 'front_reserve_info'])\r\n    },\r\n    mounted() {\r\n        this.searchForm.seat_floor = this.seat_floor[0].value\r\n        // 获取座位列表\r\n        this.getSeatlist()\r\n        // 获取用户信息\r\n        this.getUserInfo()\r\n    },\r\n    methods: {\r\n        // 将 中国标准时间 转化为时间字符串 yyyy-mm-dd hh:mm:ss\r\n        getDateStr(date) {\r\n            let d = new Date(date)\r\n            date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()\r\n            date = date.toString()\r\n            return date\r\n        },\r\n        // 获取座位列表\r\n        async getSeatlist() {\r\n            try {\r\n                let seat_floor = isNaN(Number.parseInt(this.searchForm.seat_floor)) ? 0 : Number.parseInt(this.searchForm.seat_floor)\r\n                await this.$store.dispatch('frontGetSeatList', { seat_floor })\r\n            } catch (e) {\r\n                console.warn(e.message)\r\n            }\r\n        },\r\n        // 重置表单\r\n        resetForm(formname) {\r\n            this.$refs[formname].resetFields()\r\n        },\r\n        // 重置搜索表单\r\n        resetSearchForm(formname) {\r\n            this.resetForm(formname)\r\n            this.searchForm.seat_floor = this.seat_floor[0].value\r\n        },\r\n        // 路由判断\r\n        getFrontPath(path) {\r\n            let href = this.$route.path\r\n            if (href.includes('front')) {\r\n                return path\r\n            } else {\r\n                return 'front/' + path\r\n            }\r\n        },\r\n        // 去哪个页面\r\n        goPath(path) {\r\n            this.$router.push(this.getFrontPath(path))\r\n        },\r\n        // 打开预约座位的遮罩页\r\n        openReserveSeat(index, rows) {\r\n            this.reserveSeatdDialog = true\r\n            const seat = rows[index]\r\n            // console.log(seat)\r\n            this.reserveSeatForm = {\r\n                seat_id: seat.seat_id,\r\n                seat_floor: seat.seat_floor,\r\n                seat_no: seat.seat_no,\r\n                end_time: '',\r\n            }\r\n        },\r\n        // 预约座位\r\n        async reserveSeat(formname) {\r\n            await this.$refs[formname].validate(async vaild => {\r\n                if (vaild) {\r\n                    try {\r\n                        const info = {\r\n                            user_id: this.userinfo.user_id,\r\n                            seat_id: this.reserveSeatForm.seat_id,\r\n                            end_time: getCurTime(this.getDateStr(this.reserveSeatForm.end_time))\r\n                        }\r\n                        await this.$store.dispatch('frontReserveSeat', JSON.stringify(info))\r\n                            .then(async res => {\r\n                                await this.resetForm(formname)\r\n                                await this.getUserInfo()\r\n                                this.$notify({ title: '成功', type: 'success', message: res })\r\n                                this.reserveSeatdDialog = false\r\n                                this.$bus.$emit('switchCheckNav', '1-2')\r\n                                this.goPath('reserveinfo')\r\n                            }).catch(err => this.$message({ type: 'warning', message: err.message }))\r\n                    } catch (e) {\r\n                        console.warn(e.message)\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        // 去预约查看页\r\n        goReserveInfo() {\r\n            this.$bus.$emit('switchCheckNav', '1-2')\r\n            this.goPath('reserveinfo')\r\n        },\r\n        // 获取用户信息\r\n        async getUserInfo() {\r\n            try {\r\n                await this.$store.dispatch('getUserInfo', { user_id: this.userinfo.user_id })\r\n            } catch (e) {\r\n                console.warn(e.message)\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n    width: 100%;\r\n    height: 100px;\r\n    background-color: #324057;\r\n    box-sizing: border-box;\r\n    padding: 50px 20% 10px;\r\n    overflow: hidden;\r\n\r\n    .title {\r\n        font-size: 25px;\r\n        color: #fff;\r\n    }\r\n}\r\n\r\n.main {\r\n    width: 100%;\r\n    height: calc(100% - 100px);\r\n    box-sizing: border-box;\r\n    padding: 20px 10%;\r\n\r\n    .exist-reserve {\r\n        width: 100%;\r\n        box-sizing: border-box;\r\n        padding: 0 20%;\r\n    }\r\n\r\n    .search {\r\n        width: 100%;\r\n        height: 70px;\r\n        overflow: hidden;\r\n\r\n        .search-form {\r\n            min-width: 400px;\r\n            justify-content: center;\r\n        }\r\n    }\r\n\r\n    .table {\r\n        width: 100%;\r\n        box-sizing: border-box;\r\n        padding: 0 20%;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=10f3e4c0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=10f3e4c0&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10f3e4c0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_m","directives","name","rawName","value","Object","keys","front_reserve_info","length","expression","attrs","nativeOn","$event","preventDefault","stopPropagation","goReserveInfo","apply","arguments","_v","staticStyle","userAddDialog","front_seat_list","scopedSlots","_u","key","fn","scope","row","seat_status","_s","openReserveSeat","$index","reserveSeatdDialog","on","ref","reserveSeatForm","rules","model","seat_floor","callback","$$v","$set","trim","seat_no","end_time","slot","reserveSeat","resetForm","staticRenderFns","getCurTime","date","time","Date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","current_day","data","validateEndTime","rule","reg","getDateStr","now","getTime","hour","Number","parseInt","Error","test","isNaN","label","searchForm","required","trigger","validator","seat_id","computed","mapGetters","mounted","getSeatlist","getUserInfo","methods","d","toString","$store","dispatch","e","console","warn","message","formname","$refs","resetFields","resetSearchForm","getFrontPath","path","href","$route","includes","goPath","$router","push","index","rows","seat","validate","vaild","info","user_id","userinfo","JSON","stringify","then","$notify","title","type","res","$bus","$emit","catch","err","$message","component"],"sourceRoot":""}
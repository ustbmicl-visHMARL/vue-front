{"version":3,"file":"js/512.45990048.js","mappings":"kKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,UAAU,CAACG,YAAY,CAAC,MAAQ,OAAO,YAAY,SAAS,aAAa,UAAUC,MAAM,CAAC,OAAS,GAAG,cAAc,OAAO,iBAAiB,UAAU,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,SAAW,IAAIC,MAAM,CAACC,MAAOR,EAAIS,SAASC,QAASC,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIS,SAAU,UAA2B,kBAARG,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,uBAAuB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,SAAW,IAAIC,MAAM,CAACC,MAAOR,EAAIS,SAASO,SAAUL,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIS,SAAU,WAA4B,kBAARG,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,wBAAwB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,SAAW,IAAIC,MAAM,CAACC,MAAOR,EAAIS,SAASQ,SAAUN,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIS,SAAU,WAA4B,kBAARG,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,wBAAwB,IAAI,GAAGb,EAAG,UAAU,CAACgB,IAAI,cAAcb,YAAY,CAAC,MAAQ,MAAM,YAAY,QAAQ,aAAa,SAASC,MAAM,CAAC,MAAQN,EAAImB,QAAQ,MAAQnB,EAAIoB,MAAM,MAAQ,SAAS,cAAc,OAAO,iBAAiB,QAAQ,yBAAyB,KAAK,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,MAAM,KAAO,WAAW,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,YAAYC,MAAM,CAACC,MAAOR,EAAImB,QAAQE,OAAQV,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAImB,QAAS,SAA0B,kBAARP,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,qBAAqB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,MAAM,KAAO,WAAW,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,YAAYC,MAAM,CAACC,MAAOR,EAAImB,QAAQG,OAAQX,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAImB,QAAS,SAA0B,kBAARP,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,qBAAqB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,YAAY,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,YAAYC,MAAM,CAACC,MAAOR,EAAImB,QAAQI,QAASZ,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAImB,QAAS,UAA2B,kBAARP,EAAkBA,EAAIE,OAAQF,EAAK,EAAEG,WAAW,sBAAsB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,WAAW,CAACJ,EAAG,YAAY,CAACG,YAAY,CAAC,cAAc,SAASC,MAAM,CAAC,KAAO,WAAWkB,SAAS,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyB3B,EAAI4B,UAAU,cAAc,IAAI,CAAC5B,EAAI6B,GAAG,SAAS3B,EAAG,YAAY,CAACsB,SAAS,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyB3B,EAAI8B,UAAU,cAAc,IAAI,CAAC9B,EAAI6B,GAAG,UAAU,IAAI,IAAI,EACl+E,EACIE,EAAkB,G,oBCoCtB,GACAC,KAAA,UACAC,OACA,MAAAC,EAAAA,CAAAC,EAAA3B,EAAAG,KACA,MAAAyB,EAAA,uBACA5B,EAAAM,OAAAuB,QAAA,EACA1B,EAAA,IAAA2B,MAAA,WACAF,EAAAG,KAAA/B,EAAAM,QAGAH,IAFAA,EAAA,IAAA2B,MAAA,UAGA,EAEAE,EAAAA,CAAAL,EAAA3B,EAAAG,KACA,MAAAyB,EAAA,uBACA5B,EAAAM,OAAAuB,QAAA,EACA1B,EAAA,IAAA2B,MAAA,WACAF,EAAAG,KAAA/B,EAAAM,QAEAN,EAAAM,SAAA,KAAAK,QAAAE,OACAV,EAAA,IAAA2B,MAAA,gBAEA3B,IAJAA,EAAA,IAAA2B,MAAA,UAKA,EAEAG,EAAAA,CAAAN,EAAA3B,EAAAG,KACA,UAAAQ,QAAAG,OAAAR,OACAH,EAAA,IAAA2B,MAAA,YACA9B,EAAAM,OAAAuB,QAAA,EACA1B,EAAA,IAAA2B,MAAA,aACA9B,EAAAM,SAAA,KAAAK,QAAAG,OACAX,EAAA,IAAA2B,MAAA,cAEA3B,GACA,EAEA,OAEAS,MAAA,CACAC,OAAA,EAAAqB,UAAA,EAAAC,QAAA,kBAAAC,UAAAV,IACAZ,OAAA,EAAAoB,UAAA,EAAAC,QAAA,kBAAAC,UAAAJ,IACAjB,QAAA,EAAAmB,UAAA,EAAAC,QAAA,kBAAAC,UAAAH,KAGAtB,QAAA,CACAE,OAAA,GACAC,OAAA,GACAC,QAAA,IAGA,EACAsB,SAAA,KACAC,EAAAA,EAAAA,IAAA,eAEAC,QAAA,CAEAjB,UAAAkB,GACA,KAAAC,MAAAD,GAAAE,aACA,EAEA,gBAAAF,SACA,KAAAC,MAAAD,GAAAG,UAAA,UACAC,SACA,KAAAC,SAAA,cACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,MAAA,UACA,IACA,MAAAtC,EAAA,CAAAuC,QAAA,KAAAjD,SAAAiD,QAAArC,OAAA,KAAAF,QAAAE,OAAAC,OAAA,KAAAH,QAAAG,cACA,KAAAqC,OAAAC,SAAA,YAAAC,KAAAC,UAAA3C,IACAsC,MAAAM,IACA,KAAAC,SAAA,CAAAR,KAAA,UAAAS,QAAAF,IACA,KAAAjC,UAAAkB,GACAkB,YAAA,KAEA,KAAAP,OAAAC,SAAA,cACAH,MAAAM,GAAA,KAAAI,QAAAC,KAAA,cACA,QACAC,OAAAC,GAAA,KAAAN,SAAA,CAAAR,KAAA,UAAAS,QAAAK,EAAAL,WACA,OAAAM,GACA,KAAAP,SAAA,CAAAR,KAAA,UAAAS,QAAAM,EAAAN,SACA,KACAI,OAAA,UAAAL,SAAA,CAAAR,KAAA,OAAAS,QAAA,UACA,GAEA,IC5HgR,I,UCQ5QO,GAAY,OACd,EACAzE,EACAgC,GACA,EACA,KACA,WACA,MAIF,EAAeyC,EAAiB,O","sources":["webpack://vue-library/./src/views/Index/Back/BMyInfo/index.vue","webpack://vue-library/src/views/Index/Back/BMyInfo/index.vue","webpack://vue-library/./src/views/Index/Back/BMyInfo/index.vue?ccb9","webpack://vue-library/./src/views/Index/Back/BMyInfo/index.vue?5bb0"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"myinfo maxWH flex\"},[_c('el-form',{staticStyle:{\"width\":\"100%\",\"min-width\":\"1000px\",\"text-align\":\"center\"},attrs:{\"inline\":\"\",\"label-width\":\"80px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userinfo.account),callback:function ($$v) {_vm.$set(_vm.userinfo, \"account\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userinfo.account\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userinfo.username),callback:function ($$v) {_vm.$set(_vm.userinfo, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userinfo.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"身份\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userinfo.identity),callback:function ($$v) {_vm.$set(_vm.userinfo, \"identity\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userinfo.identity\"}})],1)],1),_c('el-form',{ref:\"backPwdForm\",staticStyle:{\"width\":\"40%\",\"min-width\":\"400px\",\"margin-top\":\"100px\"},attrs:{\"model\":_vm.pwdForm,\"rules\":_vm.rules,\"align\":\"center\",\"label-width\":\"80px\",\"label-position\":\"right\",\"hide-required-asterisk\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"oldpwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.oldpwd),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"oldpwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.oldpwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newpwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.newpwd),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"newpwd\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.newpwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"newpwd1\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.pwdForm.newpwd1),callback:function ($$v) {_vm.$set(_vm.pwdForm, \"newpwd1\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"pwdForm.newpwd1\"}})],1),_c('el-form-item',{attrs:{\"align\":\"center\"}},[_c('el-button',{staticStyle:{\"margin-left\":\"-40px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.updatePwd('backPwdForm')}}},[_vm._v(\"修 改\")]),_c('el-button',{nativeOn:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.resetForm('backPwdForm')}}},[_vm._v(\"重 置\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"myinfo maxWH flex\">\r\n        <!-- 个人信息 -->\r\n        <el-form inline label-width=\"80px\" label-position=\"right\" style=\"width: 100%;min-width: 1000px;text-align: center;\">\r\n            <el-form-item label=\"账号\">\r\n                <el-input v-model.trim=\"userinfo.account\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户名\">\r\n                <el-input v-model.trim=\"userinfo.username\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"身份\">\r\n                <el-input v-model.trim=\"userinfo.identity\" disabled></el-input>\r\n            </el-form-item>\r\n        </el-form>\r\n        <!-- 修改密码 -->\r\n        <el-form ref=\"backPwdForm\" :model=\"pwdForm\" :rules=\"rules\" align=\"center\" label-width=\"80px\"\r\n            label-position=\"right\" hide-required-asterisk style=\"width: 40%;min-width: 400px;margin-top: 100px;\">\r\n            <el-form-item label=\"旧密码\" prop=\"oldpwd\">\r\n                <el-input type=\"password\" v-model.trim=\"pwdForm.oldpwd\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"新密码\" prop=\"newpwd\">\r\n                <el-input type=\"password\" v-model.trim=\"pwdForm.newpwd\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认密码\" prop=\"newpwd1\">\r\n                <el-input type=\"password\" v-model.trim=\"pwdForm.newpwd1\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item align=\"center\">\r\n                <el-button type=\"primary\" @click.native.prevent.stop=\"updatePwd('backPwdForm')\"\r\n                    style=\"margin-left: -40px;\">修 改</el-button>\r\n                <el-button @click.native.prevent.stop=\"resetForm('backPwdForm')\">重 置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    name: 'BMyInfo',\r\n    data() {\r\n        const validataOldpwd = (rule, value, callback) => {\r\n            const reg = /^[a-zA-Z0-9_]{8,12}$/\r\n            if (value.trim().length <= 0) {\r\n                callback(new Error('请输入旧密码'))\r\n            } else if (!reg.test(value.trim())) {\r\n                callback(new Error('密码格式错误'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        const validataNewpwd = (rule, value, callback) => {\r\n            const reg = /^[a-zA-Z0-9_]{8,12}$/\r\n            if (value.trim().length <= 0) {\r\n                callback(new Error('请输入新密码'))\r\n            } else if (!reg.test(value.trim())) {\r\n                callback(new Error('密码格式错误'))\r\n            } else if (value.trim() === this.pwdForm.oldpwd) {\r\n                callback(new Error('新密码不能与旧密码相同'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        const validataNewpwd1 = (rule, value, callback) => {\r\n            if (this.pwdForm.newpwd.trim() === '') {\r\n                callback(new Error('请先输入新密码'))\r\n            } else if (value.trim().length <= 0) {\r\n                callback(new Error('确认密码不得为空'))\r\n            } else if (value.trim() !== this.pwdForm.newpwd) {\r\n                callback(new Error('两次输入密码不一致'))\r\n            } else {\r\n                callback()\r\n            }\r\n        }\r\n        return {\r\n            // 表单验证规则\r\n            rules: {\r\n                oldpwd: [{ required: true, trigger: ['blur', 'change'], validator: validataOldpwd }],\r\n                newpwd: [{ required: true, trigger: ['blur', 'change'], validator: validataNewpwd }],\r\n                newpwd1: [{ required: true, trigger: ['blur', 'change'], validator: validataNewpwd1 }],\r\n            },\r\n            // 修改密码\r\n            pwdForm: {\r\n                oldpwd: '',\r\n                newpwd: '',\r\n                newpwd1: '',\r\n            },\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['userinfo'])\r\n    },\r\n    methods: {\r\n        // 重置表单\r\n        resetForm(formname) {\r\n            this.$refs[formname].resetFields()\r\n        },\r\n        // 修改密码\r\n        async updatePwd(formname) {\r\n            await this.$refs[formname].validate(async vaild => {\r\n                if (vaild) {\r\n                    await this.$confirm('确定修改?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(async () => {\r\n                        try {\r\n                            const pwdForm = { user_id: this.userinfo.user_id, oldpwd: this.pwdForm.oldpwd, newpwd: this.pwdForm.newpwd }\r\n                            await this.$store.dispatch('updatePwd', JSON.stringify(pwdForm))\r\n                                .then(res => {\r\n                                    this.$message({ type: 'success', message: res })\r\n                                    this.resetForm(formname)\r\n                                    setTimeout(() => {\r\n                                        // 退出登录\r\n                                        this.$store.dispatch('userLogout')\r\n                                            .then(res => this.$router.push('/login'))//eslint-disable-line no-unused-vars\r\n                                    }, 1000)\r\n                                }).catch(err => this.$message({ type: 'warning', message: err.message }))\r\n                        } catch (e) {\r\n                            this.$message({ type: 'warning', message: e.message })\r\n                        }\r\n                    }).catch(() => { this.$message({ type: 'info', message: '已取消' }) })\r\n                }\r\n            })\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.myinfo {\r\n    flex-flow: column;\r\n    align-items: center;\r\n    overflow: hidden;\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=51219b8b&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=51219b8b&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51219b8b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","model","value","userinfo","account","callback","$$v","$set","trim","expression","username","identity","ref","pwdForm","rules","oldpwd","newpwd","newpwd1","nativeOn","$event","preventDefault","stopPropagation","updatePwd","_v","resetForm","staticRenderFns","name","data","validataOldpwd","rule","reg","length","Error","test","validataNewpwd","validataNewpwd1","required","trigger","validator","computed","mapGetters","methods","formname","$refs","resetFields","validate","vaild","$confirm","confirmButtonText","cancelButtonText","type","then","user_id","$store","dispatch","JSON","stringify","res","$message","message","setTimeout","$router","push","catch","err","e","component"],"sourceRoot":""}